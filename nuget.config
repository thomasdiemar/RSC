<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <packageSources>
    <clear />
    <add key="nuget.org" value="https://api.nuget.org/v3/index.json" protocolVersion="3" />
    <add key="SpaceEngineers" value="https://diemar.pkgs.visualstudio.com/06ec9d7b-fe8e-4f72-a28e-3edb09ab1b81/_packaging/SpaceEngineers/nuget/v3/index.json" />
  </packageSources>

  <config>
    <add key="enablePackageSourceMapping" value="true" />
  </config>

  <packageSourceCredentials>
    <SpaceEngineers>
      <add key="Username" value="diemar" />
      <add key="ClearTextPassword" value="%AZURE_DEVOPS_NUGET_TOKEN%" />
    </SpaceEngineers>
  </packageSourceCredentials>

  <!-- 
    Azure DevOps feed authentication via environment variable
    
    The ClearTextPassword uses %AZURE_DEVOPS_NUGET_TOKEN% environment variable.
    This PAT MUST have "Packaging (Read & Write)" scope to:
    1. Restore packages
    2. Access vulnerability data (removes NU1900 warning)
    3. Publish packages (for NuGet publishing workflow)
    
    Setup Instructions:
    
    LOCAL DEVELOPMENT:
    - Create .env file in repository root with: AZURE_DEVOPS_NUGET_TOKEN=YOUR_PAT
    - Use provided scripts: .\build.ps1 or .\test.ps1
    - Scripts automatically load .env and set environment variables
    
    CI/CD PIPELINES:
    - Use GitHub Secrets (do not commit actual PAT)
    - Set AZURE_DEVOPS_NUGET_TOKEN secret in GitHub repository
    - Workflow will automatically use the secret
    
    Creating a PAT in Azure DevOps:
    1. Go to Azure DevOps → User Settings → Personal Access Tokens
    2. Click "New Token"
    3. Set Scope to "Packaging (Read & Write)"
    4. Copy the token and store securely
    
    Current Status:
    - Environment variable will be loaded by build.ps1 and test.ps1 scripts
    - Direct dotnet commands require manual environment setup
    - All functionality works (packages restore, tests pass, builds succeed)
  -->
</configuration>
