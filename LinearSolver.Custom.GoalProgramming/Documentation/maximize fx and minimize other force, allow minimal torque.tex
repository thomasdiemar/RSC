\documentclass[12pt]{article}

% =========================
% XeLaTeX setup
% =========================
\usepackage{fontspec}
\setmainfont{Times New Roman}

\usepackage{geometry}
\geometry{margin=1in}

\usepackage{amsmath, amssymb, amsfonts}
\usepackage{enumitem}

\title{Thruster Allocation:\\Maximize $F_x$, Minimize Other Force, Minimize Torque}
\author{}
\date{}

\begin{document}
\maketitle

\section*{1. Thruster Geometry}

We have four thrusters with directions $a_i$ and positions $r_i$:
\[
\begin{aligned}
a_1 &= (2,\, 2,\, 0),   & r_1 &= (100,\, 100,\, 100),\\
a_2 &= (2,\,-2,\, 0),   & r_2 &= (100,\,-100,\, 100),\\
a_3 &= (-2,\,-2,\, 0),  & r_3 &= (-100,\,-100,\, 100),\\
a_4 &= (-2,\, 2,\, 0),  & r_4 &= (-100,\, 100,\, 100).
\end{aligned}
\]

Thruster commands $T_i$ are bounded by
\[
0 \le T_i \le 1 \qquad (i = 1,2,3,4).
\]

\section*{2. Force Model}

The total force is
\[
\mathbf{F} = \sum_{i=1}^{4} T_i\, a_i = (F_x,\, F_y,\, F_z).
\]

For this specific geometry,
\[
\begin{aligned}
F_x &= 2(T_1 + T_2 - T_3 - T_4),\\
F_y &= 2(T_1 - T_2 - T_3 + T_4),\\
F_z &= 0.
\end{aligned}
\]

\section*{3. Torque Model}

The total torque about the origin is
\[
\boldsymbol{\tau} = \sum_{i=1}^{4} T_i \left( r_i \times a_i \right)
  = (\tau_x,\, \tau_y,\, \tau_z).
\]

For the given $r_i$ and $a_i$,
\[
\begin{aligned}
\tau_x &= -200 T_1 + 200 T_2 + 200 T_3 - 200 T_4,\\
\tau_y &= \ \ 200 T_1 + 200 T_2 - 200 T_3 - 200 T_4,\\
\tau_z &= 0.
\end{aligned}
\]

\section*{4. Auxiliary Variables for Magnitude Minimization}

To represent absolute values in linear form, introduce nonnegative variables:
\[
\begin{aligned}
-u_y \le F_y \le u_y, &\qquad u_y \ge 0,\\
-u_{\tau_x} \le \tau_x \le u_{\tau_x}, &\qquad u_{\tau_x} \ge 0,\\
-u_{\tau_y} \le \tau_y \le u_{\tau_y}, &\qquad u_{\tau_y} \ge 0.
\end{aligned}
\]
Thus,
\[
u_y \ge |F_y|,\qquad
u_{\tau_x} \ge |\tau_x|,\qquad
u_{\tau_y} \ge |\tau_y|.
\]

\section*{5. Single Weighted Linear Program}

A single LP encoding
\[
\text{maximize } F_x,\quad
\text{minimize other force } |F_y|,\quad
\text{minimize torque}
\]
is:
\[
\max \Bigl[\, F_x - \alpha\, u_y - \beta\, (u_{\tau_x} + u_{\tau_y}) \Bigr],
\]
with user-chosen weights $\alpha, \beta > 0$.

Subject to:
\[
\begin{aligned}
F_x &= 2(T_1 + T_2 - T_3 - T_4),\\
F_y &= 2(T_1 - T_2 - T_3 + T_4),\\
\tau_x &= -200 T_1 + 200 T_2 + 200 T_3 - 200 T_4,\\
\tau_y &= \ \ 200 T_1 + 200 T_2 - 200 T_3 - 200 T_4,
\end{aligned}
\]
\[
\begin{aligned}
-u_y \le F_y \le u_y,\\
-u_{\tau_x} \le \tau_x \le u_{\tau_x},\\
-u_{\tau_y} \le \tau_y \le u_{\tau_y},
\end{aligned}
\]
\[
0 \le T_i \le 1 \quad (i=1,\dots,4), \qquad
u_y, u_{\tau_x}, u_{\tau_y} \ge 0.
\]

\section*{6. Preemptive (Lexicographic) Priority Formulation}

If we want strict priorities
\[
\text{maximize } F_x
\;\Rightarrow\;
\text{minimize } |F_y|
\;\Rightarrow\;
\text{minimize torque},
\]
we solve three LPs sequentially.

\subsection*{Priority $P_1$: Maximize $F_x$}

Solve
\[
\max F_x
\]
subject to force/torque definitions and
\[
0 \le T_i \le 1.
\]

Let the optimum be $F_x^*$. To preserve this in later levels, add the achievement constraint
\[
F_x \ge F_x^* - \varepsilon,
\]
where $\varepsilon \ge 0$ is a small tolerance.

\subsection*{Priority $P_2$: Minimize Lateral Force $|F_y|$}

Introduce $u_y$ with
\[
-u_y \le F_y \le u_y,\qquad u_y \ge 0,
\]
and solve
\[
\min u_y
\]
subject to all previous constraints and
\[
F_x \ge F_x^* - \varepsilon.
\]

Let the resulting optimum be $u_y^*$. Then add an achievement constraint
\[
u_y \le u_y^* + \varepsilon_y,
\]
with small $\varepsilon_y \ge 0$.

\subsection*{Priority $P_3$: Minimize Torque}

Introduce $u_{\tau_x}, u_{\tau_y}$ with
\[
-u_{\tau_x} \le \tau_x \le u_{\tau_x},\quad
-u_{\tau_y} \le \tau_y \le u_{\tau_y},
\]
and solve
\[
\min \bigl( u_{\tau_x} + u_{\tau_y} \bigr)
\]
subject to
\[
F_x \ge F_x^* - \varepsilon,\qquad
u_y \le u_y^* + \varepsilon_y.
\]

\section*{7. Summary}

We have defined:
\begin{itemize}[leftmargin=*]
  \item A linear model of force and torque from 4 bounded thrusters.
  \item A single weighted LP that maximizes forward force $F_x$ while penalizing side force and torque via auxiliary variables.
  \item A preemptive (goal-programming) formulation with the priorities:
    \begin{enumerate}
      \item Maximize $F_x$,
      \item Minimize $|F_y|$,
      \item Minimize torque magnitude $|\tau_x| + |\tau_y|$.
    \end{enumerate}
\end{itemize}

This XeLaTeX document can be compiled with \texttt{xelatex} and used as a basis for implementation or documentation.

\end{document}
